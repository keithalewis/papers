# Minimal git

The least you need to know to use git.

## Init

> git init

Create a git repository in the current directory.  

You will see a directory called `.git` that contains files git needs to keep track of changes.

## Add

> git add _files..._

Add one or more _files..._ to the repository.  

This doesn't really add files to the repository. It just tells git you might want to `commit` them.

## Commit

> git commit -am "_commit message_"

You must add a _commit message_ using the `-m` flag.
The `-a` flag commits all the changed files.

Any changes to files you `add`ed will be permenently stored in the repository.
They can never be deleted after you do this.

A commit is a snapshot of all files that have been added or changed.

As you add or change files each commit creates a new key associated with
this collection of files.

Every commit command will output a message telling you what the key is.

## HEAD

The keys are 20 character strings that are not convenient to remember or use
so git uses short-hand notation to _reference_ certain keys. The most recent key
is called `HEAD`. 

## master

As you make commits they are appended to _master_: the linear sequence of
keys generated by the commits.

## Clone

> git clone _repository_

This creates a copy of a git _repository_. The repository can be the
path to a repository on a filesystem or on another computer.

The clone is completely independent of the original repository but
git makes it possible to synchronize changes between repositories.


## Push

> git push

After cloning a repository and making local local changes you can
`push` them back to the original repository.

When you are ready to move your local commits to the original repository
that you cloned use `push`

## Pull

> git pull

If others have pushed changes to the original repository you can get them using `pull`.

If there are conficts (overlapping changes) in the files you have changed or commited
then you will be unable to pull until you commit your local changes.

Visual Studio has a `sync` button that will push your commits to the
repository, then do a pull. It will warn you if you have uncommited local changes.

## Fetch

> git fetch

This is similar to pull but it does not change your existing files. It just retrieves
bookkeeping information about changes that have been made in the original repository.

## Merge

> git merge

Fetch followed by `merge` is the same thing as `pull`.
You can also merge all differences from a branch of a repository by

> git merge _repositoy_ _branch_

## Remote

> git remote add _name_ _repository_

This tells git that it can refer to a _repository_ using _name_.
The current repository already has a name: `origin` If `origin` is a
fork of a repository then it is customary to use the name `upstream`
for the repository that has been forked. This lets you pull changes from
`upstream` to your repository directly. You must then commit and push them to
`origin` if you want them to show up there.

Typical usage is

> git pull upstream master

to pull all changes in the master branch.

## Branches

Every repository has a branch called `master`. Every commit is sequentially added to
the `master` branch by default.

Repositories can have _branches_. These are sequences of commits independent of the
`master` branch. These permit streams of development to happen in parallel.

To start a new branch from your current `master` use

> git checkout -b _branch_

Where _branch_ is the name you want to use for the branch. To get back to your `master`
branch use

> git checkout master

Be sure to commit your work on _branch_ before you do this. If you have an existing
branch you can get back to that by 

> git checkout _branch_

The `-b` flag is only needed if you are creating an new branch.

## Implementation

A git repository is a _key-value_ database. The keys are 20 byte character strings
and the values are a collection of files. The keys are [SHA-1](https://en.wikipedia.org/wiki/SHA-1)
hash values computed from the collection of files associated with them.

It is not convenient for humans to type out 20 character strings to refer to a collection
of files so git also has short-hand _reference_s to keys.

