---
author: Keith A. Lewis
title: The Unified Model 
classoption: fleqn
fleqn: true
abstract: | 
  There is a unified way to value derivative
  securities using market prices.
keywords: instrumet, price, cash flow, trading, position, value, amount, hedge
...

Every continuous time arbitrage-free model of instrument prices $(X_t)$
with corresponding cash-flows $(C_t)$ has the form
$$
	X_tD_t = M_t - \sum_{s \le t} C_s D_s
$$
where $(M_t)$ is a vector-valued martingale indexed by the set
of instruments and $(D_t)$ are positive functions.
If the continuously compounded short rate at $t$ is $f_t$ then
$D_t = \exp(-\int_0^t f_s\,ds)$.
If trading times are discrete, $T = \{t_j\}$, then
$D_{t_j} = \exp(-\sum_{i<j} f_i\,\Delta t_i)$ where
$\Delta t_i = t_{i + 1} - t_i$ and $f_i$ is the repurchase agreement rate over that interval.

## Notation

If $\mathcal{A}$ is an
[algebra](https://en.wikipedia.org/wiki/Algebra_of_sets)
on the set $\Omega$ we write
$X\colon\mathcal{A}\to\mathbf{R}$ to indicate $X\colon\Omega\to\mathbf{R}$
is $\mathcal{A}$-[_measurable_](https://en.wikipedia.org/wiki/Measurable_function).
If $\mathcal{A}$ is finite then the
[atoms](https://en.wikipedia.org/wiki/Atom_(measure_theory))
of $\mathcal{A}$ form a
[partition](https://en.wikipedia.org/wiki/Partition_of_a_set)
of $\Omega$ and being measurable is
equivalent to being constant on atoms. In this case $X$ is indeed a function
on the atoms of $\mathcal{A}$.

A _filtration_ on $T\subseteq [0,\infty)$ is an increasing
collection of algebras $(\mathcal{A})_{t\in T}$.  A process
$M_{t}\colon\mathcal{A}_{t} \rightarrow \mathbf{R}$, $t\in T$, is
a _martingale_ if $M_t = E[M_u \mid \mathcal{A}_t] = E_t[M_u]$ for $t\le u$,
where $E[X\mid\mathcal{A}]$ is the conditional expectation of $X$ given the algebra $\mathcal{A}$.


## Unified Model

Let $T\subseteq [0,\infty)$ be the set of _trading times_.
We assume sample space, probability measure, and filtration are given,
$\langle\Omega,P,(\mathcal{A}_t)_{t\in T}\rangle$.

Let $I$ the set of market _instruments_ available for trading.
Instrument _prices_ are denoted by $X_t\colon\mathcal{A}_t\to\mathbf{R}^I$ 
and their correponding cash-flows by $C_t\colon\mathcal{A}_t\to\mathbf{R}^I$, for $t\in T$.

Instruments are assumed to be perfectly liquid and divisible:
they can be bought or sold at the given price in any amount. Cash flows
are associated with owning an instrument: stocks have dividends, bonds
have coupons, futures have margin adjustments and their price is always zero.

A _trading strategy_ is a finite collection of strictly increasing
stopping times $(\tau_j)$ and trades
$\Gamma_j:\mathcal{A}_{\tau_j} \rightarrow \mathbf{R}^I$ indicating
the number of shares to trade in each instrument. Trades accumulate to a _position_
$\Delta_t = \sum_{\tau_j < t}\Gamma_j = \sum_{s < t}\Gamma_s$
where $\Gamma_s = \Gamma_j$ when $s = \tau_j$. Note that trades at time $t$ are
not included in the position at time $t$. It takes time for trades to settle
before being included in the position.

The _value_ (or _mark-to-market_) of a position at time $t$ is
$V_t = \left( \Delta_t + \Gamma_t \right) \cdot X_t$:
how much you would get from liquidating
your existing position and the trades just executed.
The _amount_ generated by the trading strategy at time $t$ is
$A_t = \Delta_t \cdot C_t - \Gamma_t \cdot X_t$: you receive
the cash flows associated with your existing position and pay for the
trades you just executed.

A model is _arbitrage-free_ if there is no trading strategy with
$\sum_j \Gamma_{j} = 0$, $A_{\tau_0} > 0$, and
$A_t \geq 0$ for $t > \tau_0$: it is impossible to make money on
the first trade and never lose until the strategy is closed out.

__Theorem__. (Fundamental Theorem of Asset Pricing)
_A model is arbitrage-free if and only if
there exists a positive, adapted function $D_t$, with_
$$
X_t D_t = E[X_v D_v + \sum_{t < u \leq v}C_u D_u \mid \mathcal{A}_t].
$$

If $C_t = 0$ for all $t\in T$ this says $X_t D_t$ is a martingale.
We call $D_t$ the _deflator_ and say deflated prices are a martingale
when there are no cash-flows.

A consequence of the above and the definition of value and amount is
$$
V_t D_t = E[V_v D_v + \sum_{t < u \leq v}A_u D_u \mid \mathcal{A}_t].
$$
Note how the value of the trading strategy corresponds to price and the
amount corresponds to cash-flow in the two formulas above.
The second formula is the key to valuing derivatives. 
A derivative is a contract specifying amounts at given
times.  If it is possible to find a trading strategy that produces these
amounts then its value is given by this formula.  Trading strategies
are a way to create synthetic market instruments.

_Proof_.  If $u > t$ is sufficiently small then $X_t D_t = E_t[(X_u + C_u) D_u]$
and $\Delta_u = \Delta_t + \Gamma_t$.
Using $\Delta_u\cdot C_u = \Gamma_u\cdot X_u + A_u$ and $V_u = (\Delta_u + \Gamma_u)\cdot X_u$
we have
$$
\begin{aligned}
V_t D_t &= (\Delta_t + \Gamma_t)\cdot X_t D_t \\
	&= \Delta_u\cdot E_t[(X_u + C_u)D_u] \\
	&= E_t[(\Delta_u\cdot X_u + \Gamma_u\cdot X_u + A_u) D_u] \\
	&= E_t[(V_u + A_u)D_u] \\
\end{aligned}
$$
The second formula above follows by induction.

Assuming no arbitrage,
$V_{\tau_0}D_{\tau_0} = E_{\tau_0}[\sum_{t > \tau_0} A_t D_t] \geq 0$.
Since $D_{\tau_0}$ is positive and $V_{\tau_0} = \Gamma_{\tau_0} \cdot X_{\tau_0} = -A_{\tau_0}$ 
we have $A_{\tau_0} \leq 0$.
This proves the "easy" direction of the theorem.

There is no need to prove the "hard" direction since we have a large supply of arbitrage free models.
Every model of the form
$$
	X_t D_t = M_t - \sum_{s \leq t} C_s D_s
$$
where $M_t:\mathcal{A}_t \rightarrow \mathbf{R}^{I}$ is a martingale and
$D_t:\mathcal{A}_t \rightarrow (0,\infty)$ 
is arbitrage-free.
$$
\begin{aligned}
E_t[X_v D_v + \sum_{t < u \leq v}C_u D_u]
&= E_t[M_v - \sum_{s \leq v} C_s D_s + \sum_{t < u \leq v}C_u D_u] \\
&= E_t[M_v - \sum_{s \leq t} C_s D_s] \\
&= M_t - \sum_{s \leq t} C_s D_s \\
&= X_t D_t \\
\end{aligned}
$$

## Examples

We illustrate the unified model for particular cases.

### Black-Scholes/Merton

Let $D_t = e^{-\rho t}$ and $M_t = (r, s e^{\sigma B_t - \sigma^2 t/2})$.
This is the Black-Scholes/Merton model. There is no need for self-financing
portfolios, Ito's Lemma, much less partial differential equations, when using
the Unified Model.

### Repurchase Agreement

In a discrete time model with $T = \{t_j\}$ a _repurchase agreement_ at time $t_j$, has price $X_{t_j} = 1$
and cash flow $C_{t_{j+1}} = R_j$ where $R_j = \exp(f_j\Delta t_j)$ is the realized return
for the _repo rate_ $f_j$. The _canonical deflator_ $D_{t_j} = 1/\Pi_{i < j} R_i = \exp(-\sum_{i<j} f_i\,\Delta_i)$
provides an arbitrage-free model for repos since
$D_{t_j} = E_{t_j}[R_j D_{t_{j+1}}]$.

The continuous time analog is $D_t = \exp(-\int_0^t f_s\,ds)$ where $(f_t)$ is
the _continuously compounded instantaneous forward rate_.

### Zero Coupond Bond

A _zero coupon bond_ maturing at time $u$, $D(u)$, has a single cash flow
$C^{D(u)}_u = 1$ so its price at time $t$ satisfies $X^{D(u)}_t D_t =
E_t[1 D_u]$. We write $X^{D(u)}_t = D_t(u) = E_t[D_u/D_t]$ for its price at time $t$. In
particular $D_0(u) = E D_u$. Likewise, instruments that are a portfolio of
zero coupon bonds (e.g., cash deposits, forward rate agreements, swaps)
have a price that is determined by the deflator.
<!--
### American Option

<div>
Keith A. Lewis [kal@kalx.net]
</div>
-->
